<!doctype html>
<html lang="en">
<head>

<!-- Basic Page Needs
================================================== -->
<title>Hireo</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<!-- CSS
================================================== -->
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/colors/blue.css">
<link rel="stylesheet" href="css/search.css">
<style>
	/* Absolute Center CSS Spinner */
.loading {
  position: fixed;
  z-index: 999;
  height: 2em;
  width: 2em;
  overflow: show;
  margin: auto;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
}

/* Transparent Overlay */
.loading:before {
  content: '';
  display: block;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.3);
}

/* :not(:required) hides these rules from IE9 and below */
.loading:not(:required) {
  /* hide "loading..." text */
  font: 0/0 a;
  color: transparent;
  text-shadow: none;
  background-color: transparent;
  border: 0;
}

.loading:not(:required):after {
  content: '';
  display: block;
  font-size: 10px;
  width: 0.5em;
  height: 0.5em;
  margin-top: -0.5em;
  -webkit-animation: spinner 1500ms infinite linear;
  -moz-animation: spinner 1500ms infinite linear;
  -ms-animation: spinner 1500ms infinite linear;
  -o-animation: spinner 1500ms infinite linear;
  animation: spinner 1500ms infinite linear;
  border-radius: 0.5em;
  -webkit-box-shadow: rgba(0, 0, 0, 0.75) 1.5em 0 0 0, rgba(0, 0, 0, 0.75) 1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) 0 1.5em 0 0, rgba(0, 0, 0, 0.75) -1.1em 1.1em 0 0, rgba(0, 0, 0, 0.5) -1.5em 0 0 0, rgba(0, 0, 0, 0.5) -1.1em -1.1em 0 0, rgba(0, 0, 0, 0.75) 0 -1.5em 0 0, rgba(0, 0, 0, 0.75) 1.1em -1.1em 0 0;
  box-shadow: rgba(0, 0, 0, 0.75) 1.5em 0 0 0, rgba(0, 0, 0, 0.75) 1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) 0 1.5em 0 0, rgba(0, 0, 0, 0.75) -1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) -1.5em 0 0 0, rgba(0, 0, 0, 0.75) -1.1em -1.1em 0 0, rgba(0, 0, 0, 0.75) 0 -1.5em 0 0, rgba(0, 0, 0, 0.75) 1.1em -1.1em 0 0;
}

/* Animation */

@-webkit-keyframes spinner {
  0% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
@-moz-keyframes spinner {
  0% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
@-o-keyframes spinner {
  0% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
@keyframes spinner {
  0% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

</style>
</head>
<body class="gray">

<!-- Wrapper -->
<div id="wrapper">

<!-- Header Container
================================================== -->
<header id="header-container" class="fullwidth">
	<div class="loading">Loading&#8230;</div>
	<!-- Header -->
	<div id="header">
		<div class="container">
			
			<!-- Left Side Content -->
			<div class="left-side">
				
				<!-- Logo -->
				<div id="logo">
					<a href="index.html"><img src="images/logo.png" alt=""></a>
				</div>

				<!-- Main Navigation -->
				<nav id="navigation">
					<ul id="responsive">

						<li><a href="index.html">Home</a>
							
						</li>

						<li><a href="#" class="current">Courses</a>
							
						</li>

						
					</ul>
				</nav>
				<div class="clearfix"></div>
				<!-- Main Navigation / End -->
				
			</div>
			<!-- Left Side Content / End -->


			<!-- Right Side Content / End -->
			<div class="right-side">

				<!--  User Notifications -->
				<div class="header-widget hide-on-mobile">
					
					<div class="keyword-input-container autocomplete" style="
					margin-top: 15px;
					width: 450px;
					">
						<input id="intro-keywords" type="text" class="keyword-input" placeholder="Search for 2,000 courses">
						<button class="keyword-input-button ripple-effect" onclick="searchResult()"><i class="icon-feather-search"></i></button>
					</div>
				</div>
				<!--  User Notifications / End -->

				<!-- User Menu -->
				<div class="header-widget">

					<!-- Messages -->
					<div class="header-notifications user-menu">
						<div class="header-notifications-trigger">
							<a href="#"><div class="user-avatar status-online"><img src="images/user-avatar-small-01.jpg" alt=""></div></a>
						</div>

						<!-- Dropdown -->
						<div class="header-notifications-dropdown">

							<!-- User Status -->
							<div class="user-status">

								<!-- User Name / Avatar -->
								<div class="user-details">
									<div class="user-avatar status-online"><img src="images/user-avatar-small-01.jpg" alt=""></div>
									<div class="user-name">
										Tom Smith <span>Freelancer</span>
									</div>
								</div>
								
								<!-- User Status Switcher -->
								<div class="status-switch" id="snackbar-user-status">
									<label class="user-online current-status">Online</label>
									<label class="user-invisible">Invisible</label>
									<!-- Status Indicator -->
									<span class="status-indicator" aria-hidden="true"></span>
								</div>	
						</div>
						
						<ul class="user-menu-small-nav">
							<li><a href="dashboard.html"><i class="icon-material-outline-dashboard"></i> Dashboard</a></li>
							<li><a href="dashboard-settings.html"><i class="icon-material-outline-settings"></i> Settings</a></li>
							<li><a href="index-logged-out.html"><i class="icon-material-outline-power-settings-new"></i> Logout</a></li>
						</ul>

						</div>
					</div>

				</div>
				<!-- User Menu / End -->

				<!-- Mobile Navigation Button -->
				<span class="mmenu-trigger">
					<button class="hamburger hamburger--collapse" type="button">
						<span class="hamburger-box">
							<span class="hamburger-inner"></span>
						</span>
					</button>
				</span>

			</div>
			<!-- Right Side Content / End -->

		</div>
	</div>
	<!-- Header / End -->

</header>
<div class="clearfix"></div>
<!-- Header Container / End -->

<!-- Spacer -->
<div class="margin-top-90"></div>
<!-- Spacer / End-->

<!-- Page Content
================================================== -->
<div class="container">
	<div class="row">
		<div class="col-xl-3 col-lg-4">
			<div class="sidebar-container">
				
				<!-- Salary -->
				<div class="dashboard-nav bootstrap-select">
					<ul>
						<li><a href="#" style="font-size: 15px; padding-left: 16px; box-shadow: 0.5px 0.5px 0.5px 0 rgba(0.2, 0.2, 0.2, 0.2)"><i class="icon-material-outline-speaker-notes"></i> Order by <strong>Subtitle</strong></a>
							<ul id='dropsub'>
								
							</ul>	
						</li>
	
					</ul>
				</div>


				<!-- Category -->
				<div class="sidebar-widget">
					<h3>Category</h3>
					<select id="listoffer" class="selectpicker" data-selected-text-format="count" data-size="7" title="All Categories">
						
					</select>
				</div>
				
				<!-- Tags -->
				<div class="sidebar-widget">
					<h3>Tags</h3>

					<div id='skillgain' class="tags-container">
						
					</div>
					<div class="clearfix"></div>
				</div>

			</div>
		</div>
		<div class="col-xl-9 col-lg-8 content-left-offset">

			<h3 class="page-title">Search Results</h3>

			<div id='searchsuggest'>

			</div>
			<div id='searchword'>

			</div>
			<br>
			<div id='keywordfillter' class="keywords-list" style="height: auto;">	
				<span id="offer" class="keyword">
					
				</span>
				<span id="skill" class="keyword">
					
				</span>
			</div>
			<br>
			<div id='searchresult' class="listings-container compact-list-layout margin-top-35">
				
			</div>

		</div>
	</div>
</div>


<!-- Footer
================================================== -->
<div id="footer">
	

	
	<!-- Footer Copyrights -->
	<div class="footer-bottom-section">
		<div class="container">
			<div class="row">
				<div class="col-xl-12">
					Â© 2018 <strong>Hireo</strong>. All Rights Reserved.
				</div>
			</div>
		</div>
	</div>
	<!-- Footer Copyrights / End -->

</div>
<!-- Footer / End -->

</div>
<!-- Wrapper / End -->

<!-- Scripts
================================================== -->
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/jquery-migrate-3.0.0.min.js"></script>
<script src="js/mmenu.min.js"></script>
<script src="js/tippy.all.min.js"></script>
<script src="js/simplebar.min.js"></script>
<script src="js/bootstrap-slider.min.js"></script>
<script src="js/bootstrap-select.min.js"></script>
<script src="js/snackbar.js"></script>
<script src="js/clipboard.min.js"></script>
<script src="js/counterup.min.js"></script>
<script src="js/magnific-popup.min.js"></script>
<script src="js/slick.min.js"></script>
<script src="js/custom.js"></script>
<script src="Scripts/Search.js"></script>


<!-- Snackbar // documentation: https://www.polonel.com/snackbar/ -->
<script>
// Snackbar for user status switcher
$('#snackbar-user-status label').click(function() { 
	Snackbar.show({
		text: 'Your status has been changed!',
		pos: 'bottom-center',
		showAction: false,
		actionText: "Dismiss",
		duration: 3000,
		textColor: '#fff',
		backgroundColor: '#383838'
	}); 
}); 
</script>

<!-- Google Autocomplete -->
<script>
	function initAutocomplete() {
		 var options = {
		  types: ['(cities)'],
		  // componentRestrictions: {country: "us"}
		 };

		 var input = document.getElementById('autocomplete-input');
		 var autocomplete = new google.maps.places.Autocomplete(input, options);
	}
	function detailCourse(pram){
		window.location.href = "detail-course.html?tag="+ pram.id;
	}
	function searchResult(){
		query = document.getElementById('intro-keywords').value;
		window.location.href = "course.html?q="+ query;
	}
	function filterOffer(pram){
		window.location.href += '&offer_by=' + pram.id;
		
	}
	function filterSkill(pram){
		
		window.location.href += '&skill_gain=' + pram.id;
		if(window.location.href.split('&skill_gain').length != 1){
			if(window.location.href.split('&skill_gain')[1].split('&').length != 1){
				window.location.href = window.location.href.split('&skill_gain=')[0] + '&skill_gain=' +pram.id + '&' + window.location.href.split('&')[2];
			}else{
				window.location.href = window.location.href.split('&skill_gain=')[0] + '&skill_gain=' +pram.id;
			}
		}
		
	}
	q = window.location.href.split("?q=")[1].split('&')[0];
  	let query_string = '';
  	if (q != undefined) {
    	for(var i = 0; i <q.split("%20").length; i++){
      		query_string += q.split("%20")[i] + ' ';
    	}
  	}
	let a = [];
	function filterSub(obj){
		document.getElementById("searchresult").innerHTML  = '';
		if(obj.checked == true){
			a.push(obj.id);
			
			//console.log(obj.value)
			gen_filled_course(str_sub(a))
		}
		else{
			a.splice(a.indexOf(obj.id),1)
			gen_filled_course(str_sub(a))
		}
	}
	function str_sub(lst){
		str = ''
		for (var i = 0; i < lst.length; i++){
			str += lst[i] + ',';
		}
		return str.slice(0, -1);
	}
	function gen_filled_course(list_sub){
		var s = document.getElementById("skill").innerText;
		var o = document.getElementById("offer").innerText;
		$.ajax({
				url: "http://127.0.0.1:8000/api/course-list", //http://27.78.33.234:8000/api/course-list
				type: "POST",
				dataType: "json",
				data: {
					queries: query_string.trim(),
					filter: list_sub,
					flag: 1	
				},
				success: function (result) {
					
					for (var i = 0; i < result.result.courses.length; i++) {
						if(result.result.courses[i]._source.offer_by==null){
          					result.result.courses[i]._source.offer_by = 'None'
        				}
        				if(result.result.courses[i]._source.skill_gain==null){
          					result.result.courses[i]._source.skill_gain = 'None'
        				}
						if((result.result.courses[i]._source.offer_by.indexOf(o) > -1 || o == '\n\t\t\t\t\t\n\t\t\t\t')
          				&& (result.result.courses[i]._source.skill_gain.indexOf(s) > -1 || s == '\n\t\t\t\t\t\n\t\t\t\t')){
							document.getElementById("searchresult").innerHTML +=
							'<a id="' +
							result.result.courses[i]._source.course_tag +
							'" onclick="detailCourse(this)" style="cursor:pointer" class="job-listing">' +
							'<div class="job-listing-details">' +
							'<div class="job-listing-company-logo">' +
							'<img src="' +
							result.result.courses[i]._source.course_image +
							'" style="width:50px;height:50px;" alt="">' +
							"</div>" +
							'<div class="job-listing-description">' +
							'<h3 class="job-listing-title">' +
							result.result.courses[i]._source.course_title +
							"</h3>" +
							'<div class="job-listing-footer">' +
							"<ul>" +
							'<li><i class="icon-material-outline-location-city"></i> ' +
							result.result.courses[i]._source.offer_by +
							' <div class="verified-badge" title="Verified Employer" data-tippy-placement="top"></div></li>' +
							'<li><i class="icon-material-outline-language"></i> ' +
							result.result.courses[i]._source.language +
							"</li>" +
							'<li><i class="icon-material-outline-star-border"></i> ' +
							result.result.courses[i]._source.rating +
							"</li>" +
							'<li><i class="icon-material-outline-person-pin"></i> ' +
							result.result.courses[i]._source.enrolled +
							"</li>" +
							"</ul>" +
							"<div>" +
							"</div>" +
							"</div>";
						}
					}
				}
			})
	}

	$(document).on('click', '.skill-remove', function() {
		document.getElementById('skill').classList.add('keyword-removed')
		if(window.location.href.split('&skill_gain')[0].split('&').length != 1 
		|| window.location.href.split('&skill_gain')[1].split('&').length == 1){
			window.location.href = window.location.href.split('&skill_gain')[0]
		}else{
			window.location.href = window.location.href.split('&skill_gain')[0] + '&offer_by'+ window.location.href.split('&offer_by')[1]
		}
	});
	$(document).on('click', '.offer-remove', function() {
		document.getElementById('offer').classList.add('keyword-removed')
		if(window.location.href.split('&offer_by')[0].split('&').length != 1 
		|| window.location.href.split('&offer_by')[1].split('&').length == 1){
			window.location.href = window.location.href.split('&offer_by')[0]
		}else{
			window.location.href = window.location.href.split('&offer_by')[0] + '&skill_gain'+ window.location.href.split('&skill_gain')[1]
		}
	});
</script>

<!-- Google API & Maps -->
<!-- Geting an API Key: https://developers.google.com/maps/documentation/javascript/get-api-key -->


</body>
</html>